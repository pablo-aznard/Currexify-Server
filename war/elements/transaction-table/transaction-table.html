<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import"
	href="../../bower_components/paper-styles/typography.html">

<dom-module id="transaction-table"> <template>
<style>
:host {
	display: block;
}

span { @apply (--paper-font-body1);
	
}

.rojo {
	color: #FF5252
}

.verde {
	color: #4CAF50
}

.neutral {
	color: #777
}
</style>
<div style="width: 100%; margin-top: 20px">
	<div
		style="background-color: #666; color: white; padding: 10px 0 10px 10px;">
		<span>{{title}}</span>
	</div>
	<template is="dom-repeat" items="{{transactions}}" as="item">
	<table
		style="padding: 10px; width: 100%; background-color: #EEE; border-bottom: 1px solid #ccc">
		<tr>
			<td style="width:24%"><span style="margin-right: 60px; float: left;">{{item.user}}</span></td>
			<td style="width:24%"><span style="margin-right: 60px; float: left;">{{item.date}}</span></td>
			<td style="width:24%"><span class$="{{checkType(item.type)}}"
				style="margin-right: 30px; float: right;">{{item.type}}</span></td>
			<td style="width:24%">
				<span class$="{{checkType(item.type)}}" style="margin-right: 30px; float: right;">{{checkMoves(item.type)}}{{item.quantity}}</span>
				<template is="dom-if" if="{{item.friend}}">
					<span><form action="/newtransaction" method="post">
						<input type="hidden" name="friend" value="{{item.friend}}">
						<input type="hidden" name="type" value="{{item.type}}">
						<input type="hidden" name="amount" value="{{item.quantity}}">
						<button name="accept">Aceptar transacción</button>
						<button name="reject">Rechazar transacción</button> 
					</form></span>
				</template>	
			</td>
		</tr>
	</table>
	</template>
</div>
</template> <script>
	(function() {
		'use strict';

		Polymer({
			is : 'transaction-table',

			properties : {
				title : {
					type : "String",
					value : "Transactions"
				},
				transactions : {
					type : Array,
					value : [ {
						"user" : "Pablo Pavo",
						"type" : "0.95",
						"quantity" : "200€"
					}, {
						"user" : "Nacho Cano",
						"type" : "0.05",
						"quantity" : "300€"
					}, {
						"user" : "William Tell",
						"type" : "2.95",
						"quantity" : "500€"
					} ]
				}
			},

			ready : function() {
				var that = this;
			},

			checkType : function(type) {
				if (type == "saliente") {
					return "rojo"
				} else if (type == "entrante"){
					return "verde"
				} else if (type == "bloqueado") {
					return "neutral"
				}

			},

			checkMoves : function(type) {
				if (type == "saliente" || type == "bloqueado") {
					return "-"
				} else if (type == "entrante"){
					return "+"
				}
			}
		});
	})();
</script> </dom-module>
